<!doctype html><html lang=en><head><title>Custom Error Controller in CodeIgniter 2.0 ::
Wandering Thoughts</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="CodeIgniter 2.0  was released a few days ago, and one of the (much overdue) features I&amp;rsquo;m looking forward to using is the ability to define a custom 404 controller. This is useful for handling requests to non-existant controller methods by specifying a controller to call instead. Here&amp;rsquo;s how to get it setup:
 Get the latest CodeIgniter 2.0 code from Create an error controller with an error_404 method. Modify application/config/routes."><meta name=keywords content="CodeIgniter,,php,,custom,error,handler"><meta name=robots content="noodp"><link rel=canonical href=https://www.bradym.net/php/custom-error-controller-in-codeigniter-2-0.html><link rel=stylesheet href=https://www.bradym.net/assets/style.css><link rel=stylesheet href=https://www.bradym.net/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://www.bradym.net/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://www.bradym.net/img/favicon.png><link href=https://www.bradym.net/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://www.bradym.net/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://www.bradym.net/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://www.bradym.net/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://www.bradym.net/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=https://www.bradym.net/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Custom Error Controller in CodeIgniter 2.0"><meta name=twitter:description content="One long-awaited feature of CodeIgniter 2.0 is using a controller for the 404 page. Unfortunately it doesn't quite work in all situations. Here's one appraoch to fix the behavior."><meta property="og:title" content="Custom Error Controller in CodeIgniter 2.0"><meta property="og:description" content="One long-awaited feature of CodeIgniter 2.0 is using a controller for the 404 page. Unfortunately it doesn't quite work in all situations. Here's one appraoch to fix the behavior."><meta property="og:type" content="article"><meta property="og:url" content="https://www.bradym.net/php/custom-error-controller-in-codeigniter-2-0.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2011-02-01T00:00:00+00:00"><meta property="article:modified_time" content="2011-02-01T00:00:00+00:00"><meta property="og:site_name" content="Wandering Thoughts"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>wandering thoughts</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/tags/>Tags</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/tags/>Tags</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Custom Error Controller in CodeIgniter 2.0</h1><div class=post-meta><span class=post-date>2011-02-01</span></div><span class=post-tags><a href=https://www.bradym.net/tags/php/>#PHP</a>&nbsp;</span><div class=post-content><p><a href=http://codeigniter.com target=_blank>CodeIgniter 2.0</a> was released a few days ago,
and one of the (much overdue) features I&rsquo;m looking forward to using is
the ability to define a custom 404 controller. This is useful for
handling requests to non-existant controller methods by specifying a
controller to call instead. Here&rsquo;s how to get it setup:</p><ol><li>Get the latest CodeIgniter 2.0 code from</li><li>Create an error controller with an error_404 method.</li><li>Modify application/config/routes.php by setting</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>    <span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>    $route[<span style=color:#e6db74>&#39;404_override&#39;</span>]  <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;error/error_404&#39;</span>;
</span></span><span style=display:flex><span>    <span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>You should now have a functional error controller for 404s when
triggered by a request for non-existent controller methods. But what if
you want to trigger 404s from your code and use the error controller?</p><p>Something like this, perhaps?</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Get an article from the database, show a 404 page if the requested article was not found.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$article <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_content</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri_string</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>empty</span>($article){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>show_404</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri_string</span>());
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Unfortunately, this will still use the built-in non-controller error
message. I got to playing around and discovered that (at least in CI
2.0, maybe 1.7.2) you can do this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$article <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_content</span>($this<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri</span><span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>uri_string</span>();
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>empty</span>($article){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>include</span>(<span style=color:#a6e22e>APPPATH</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;controllers/error.php&#39;</span>);
</span></span><span style=display:flex><span>    $error <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Error</span>();
</span></span><span style=display:flex><span>    $error<span style=color:#f92672>-&gt;</span><span style=color:#a6e22e>error_404</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>Of course you could do the same thing for other error types (403, 500,
etc) by creating new methods in the Error controller and calling the
correct method. It could even be simplified more by creating a helper
with a function such as this one:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>custom_error</span>($status_code <span style=color:#f92672>=</span> <span style=color:#ae81ff>404</span>){
</span></span><span style=display:flex><span>    $method_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;error_&#39;</span><span style=color:#f92672>.</span>$status_code;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>include</span>(<span style=color:#a6e22e>APPPATH</span><span style=color:#f92672>.</span><span style=color:#e6db74>&#39;controllers/error.php&#39;</span>);
</span></span><span style=display:flex><span>    $error <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Error</span>();
</span></span><span style=display:flex><span>    $error<span style=color:#f92672>-&gt;</span>$method_name();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://www.bradym.net/php/understanding-error-settings.html><span class=button__icon>←</span>
<span class=button__text>Understanding error settings in PHP</span></a></span>
<span class="button next"><a href=https://www.bradym.net/php/modify-query-string-parameters.html><span class=button__text>Modify Query String Parameters</span>
<span class=button__icon>→</span></a></span></div></div><div style=padding-top:15px><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//bradymnet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>wandering thoughts</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2022<span></span></div></div></footer><script src=https://www.bradym.net/assets/main.js></script>
<script src=https://www.bradym.net/assets/prism.js></script></div></body></html>