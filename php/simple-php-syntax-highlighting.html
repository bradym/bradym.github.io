<!doctype html><html lang=en><head><title>Simple PHP Syntax Highlighting ::
Wandering Thoughts</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One benefit to working as part of a development team is that you can ask your fellow developers to look at your code and ask for help. Sending code back and forth over email can be frustrating and even counter-productive. IMO, the ideal way to share code is by simply sending a URL and letting the other developer view it in their browser with syntax highlighting.
Here&amp;rsquo;s one way that does not require any external libraries and is very easy to setup:"><meta name=keywords content="php,,syntax,highlighting,,team,development,,debugging"><meta name=robots content="noodp"><link rel=canonical href=http://www.bradym.net/php/simple-php-syntax-highlighting.html><link rel=stylesheet href=http://www.bradym.net/assets/style.css><link rel=stylesheet href=http://www.bradym.net/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=http://www.bradym.net/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=http://www.bradym.net/img/favicon.png><link href=http://www.bradym.net/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=http://www.bradym.net/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=http://www.bradym.net/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=http://www.bradym.net/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=http://www.bradym.net/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin><link href=http://www.bradym.net/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin><meta name=twitter:card content="summary"><meta name=twitter:title content="Simple PHP Syntax Highlighting"><meta name=twitter:description content="Looking for a simple way to share code with fellow developers on a local network? This post shows one way to do just that using PHP."><meta property="og:title" content="Simple PHP Syntax Highlighting"><meta property="og:description" content="Looking for a simple way to share code with fellow developers on a local network? This post shows one way to do just that using PHP."><meta property="og:type" content="article"><meta property="og:url" content="http://www.bradym.net/php/simple-php-syntax-highlighting.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2009-04-19T00:00:00+00:00"><meta property="article:modified_time" content="2009-04-19T00:00:00+00:00"><meta property="og:site_name" content="Wandering Thoughts"></head><body class=dark-theme><div class=container><header class=header><span class=header__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>wandering thoughts</span>
<span class=logo__cursor></span></a>
<span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/tags/>Tags</a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/tags/>Tags</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><h1 class=post-title>Simple PHP Syntax Highlighting</h1><div class=post-meta><span class=post-date>2009-04-19</span></div><span class=post-tags><a href=http://www.bradym.net/tags/php/>#PHP</a>&nbsp;</span><div class=post-content><p>One benefit to working as part of a development team is that you can ask your fellow developers to look at your code and ask for help. Sending code back and forth over email can be frustrating and even counter-productive. IMO, the ideal way to share code is by simply sending a URL and letting the other developer view it in their browser with syntax highlighting.</p><p>Here&rsquo;s one way that does not require any external libraries and is very easy to setup:</p><h2 id=add-this-line-to-htaccess>Add this line to .htaccess
<a href=#add-this-line-to-htaccess class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-apache data-lang=apache><span style=display:flex><span>RewriteRule ^(.*)\.phps$ viewsource.php?file=$1.php [QSA,L]
</span></span></code></pre></div><p>This rule sends all requests for files ending in .phps to the viewsource.php file with the path as an argument.</p><h2 id=put-the-below-script-in-the-document-root-of-your-development-server>Put the below script in the document root of your development server
<a href=#put-the-below-script-in-the-document-root-of-your-development-server class=h-anchor aria-hidden=true>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// This script should *NEVER* be used on a production server!
</span></span></span><span style=display:flex><span><span style=color:#75715e>// By default, it will only run on localhost. If you want to run this script on
</span></span></span><span style=display:flex><span><span style=color:#75715e>// a staging server add the IP address of that server to $allowed_servers.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$allowed_servers <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(<span style=color:#e6db74>&#39;127.0.0.1&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set $base_dir to the root of your web directory.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$base_dir <span style=color:#f92672>=</span> $_SERVER[<span style=color:#e6db74>&#39;DOCUMENT_ROOT&#39;</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Make sure this script is running on an allowed server.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(<span style=color:#f92672>!</span><span style=color:#a6e22e>in_array</span>($_SERVER[<span style=color:#e6db74>&#39;SERVER_ADDR&#39;</span>], $allowed_servers)){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>die</span>(<span style=color:#e6db74>&#39;Do not run this script in production!&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Exit if no file was specified
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span>(<span style=color:#66d9ef>empty</span>($_GET[<span style=color:#e6db74>&#39;file&#39;</span>])){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>die</span>(<span style=color:#e6db74>&#39;No file specified.&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Ensure the requested file is inside $base_dir and that it exists
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>$real_path <span style=color:#f92672>=</span> <span style=color:#a6e22e>realpath</span>($base_dir<span style=color:#f92672>.</span>$_GET[<span style=color:#e6db74>&#39;file&#39;</span>]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>strpos</span>($real_path, $base_dir) <span style=color:#f92672>===</span> <span style=color:#66d9ef>false</span> <span style=color:#f92672>||</span> $real_path <span style=color:#f92672>===</span> <span style=color:#66d9ef>false</span>){
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>die</span>(<span style=color:#e6db74>&#39;Access denied or file not found.&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;html&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;head&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;title&gt;&lt;?= $real_path ?&gt;&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;style type=&#34;text/css&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    .num_margin {
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        text-align: right;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        margin-right: 6pt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        padding-right: 6pt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        border-right: 1px solid gray;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    }
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    .num_margin a {
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        color: gray;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        font-size: 13px;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>        font-family: monospace;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    }
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    body { margin: 0px; margin-left: 5px; }
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    div { float: left; }
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/style&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/head&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;body&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;?php
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$lines = &#39;&#39;;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$lines_array = range(1, count(file($real_path)));
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>foreach($lines_array as $line){
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>    $lines .=&#34;&lt;a href=\&amp;quot;#$line\&amp;quot; name=\&amp;quot;$line\&amp;quot;&gt;$line&lt;/a&gt;&lt;br /&gt;&#34;;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>}
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$content = highlight_file($real_path, true);
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>echo &#34;&lt;div&gt;&lt;div class=\&#34;num_margin\&#34;&gt;$lines&lt;/div&gt;&lt;div&gt;$content&lt;/div&gt;&lt;/div&gt;&#34;;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>?&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/body&gt;
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>&lt;/html&gt;
</span></span></span></code></pre></div><p>Now when you visit a link like: <code>http://localhost/info.phps</code> it will show the source of the file.</p><p>Note: This script should <strong>never</strong> be used in production!</p></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=http://www.bradym.net/php/creating-icalendar-ics-files-with-php.html><span class=button__icon>←</span>
<span class=button__text>Creating iCalendar (ics) files with PHP</span></a></span>
<span class="button next"><a href=http://www.bradym.net/php/setup-xdebug-on-os-x.html><span class=button__text>Setup Xdebug on OS X Leopard</span>
<span class=button__icon>→</span></a></span></div></div><div style=padding-top:15px><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//bradymnet.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><footer class=footer><div class=footer__inner><a href=/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>wandering thoughts</span>
<span class=logo__cursor></span></a><div class=copyright><span>© 2022<span></span></div></div></footer><script src=http://www.bradym.net/assets/main.js></script>
<script src=http://www.bradym.net/assets/prism.js></script></div></body></html>